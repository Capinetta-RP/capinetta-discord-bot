function openModal(modalId){const modal=document.getElementById(modalId);if(modal){modal.classList.add('active');}}function closeModal(modalId){const modal=document.getElementById(modalId);if(modal){modal.classList.remove('active');}}function setupModalOverlays(){document.querySelectorAll('.modal-overlay').forEach(overlay=>{overlay.addEventListener('click',(e)=>{if(e.target===overlay){closeModal(overlay.id);}});});}function setupTableFiltering(searchInputId,filterButtonsSelector,tableRowsSelector,filterFunction=null){const searchInput=document.getElementById(searchInputId);const filterButtons=document.querySelectorAll(filterButtonsSelector);const tableRows=document.querySelectorAll(tableRowsSelector);if(!searchInput||filterButtons.length===0||tableRows.length===0){console.warn('setupTableFiltering:No se encontraron los elementos necesarios');return;}let currentFilter='all';searchInput.addEventListener('input',(e)=>{const searchTerm=e.target.value.toLowerCase();if(filterFunction){filterFunction(searchTerm,currentFilter);}else{applyDefaultFilter(tableRows,searchTerm,currentFilter);}});filterButtons.forEach(btn=>{btn.addEventListener('click',()=>{filterButtons.forEach(b=>b.classList.remove('active'));btn.classList.add('active');currentFilter=btn.dataset.filter;const searchTerm=searchInput.value.toLowerCase();if(filterFunction){filterFunction(searchTerm,currentFilter);}else{applyDefaultFilter(tableRows,searchTerm,currentFilter);}});});}function applyDefaultFilter(rows,searchTerm,filter){rows.forEach(row=>{const rowData=row.dataset.name?row.dataset.name.toLowerCase():'';const rowType=row.dataset.type;const matchesSearch=rowData.includes(searchTerm);const matchesFilter=filter==='all'||(filter==='staff'&&rowType==='staff')||(filter==='custom'&&rowType==='custom');row.style.display=matchesSearch&&matchesFilter?'':'none';});}function filterWarnsTable(searchTerm,filter){const tableRows=document.querySelectorAll('.warn-row');tableRows.forEach(row=>{const userData=row.dataset.user?row.dataset.user.toLowerCase():'';const warnCount=parseInt(row.dataset.warns)||0;const matchesSearch=userData.includes(searchTerm);const matchesFilter=filter==='all'||(filter==='high'&&warnCount>=3)||(filter==='medium'&&warnCount>=1&&warnCount<3)||(filter==='low'&&warnCount===0);row.style.display=matchesSearch&&matchesFilter?'':'none';});}function filterRolesTable(searchTerm,filter){const tableRows=document.querySelectorAll('.role-row');tableRows.forEach(row=>{const roleData=row.dataset.name?row.dataset.name.toLowerCase():'';const roleType=row.dataset.type;const matchesSearch=roleData.includes(searchTerm);const matchesFilter=filter==='all'||(filter==='admin'&&roleType==='admin')||(filter==='staff'&&roleType==='staff')||(filter==='custom'&&roleType==='custom');row.style.display=matchesSearch&&matchesFilter?'':'none';});}function showAlert(elementId,message,type='info',autoDismiss=0){const alertElement=document.getElementById(elementId);if(!alertElement){console.warn(`showAlert:No se encontr√≥ elemento con ID "${elementId}"`);return;}const alertClass=`alert alert-${type}`;alertElement.innerHTML=`<div class="${alertClass}">${message}</div>`;if(autoDismiss>0){setTimeout(()=>{alertElement.innerHTML='';},autoDismiss);}}function clearAlert(elementId){const alertElement=document.getElementById(elementId);if(alertElement){alertElement.innerHTML='';}}function getSelectedCheckboxes(selectorOrGroup){const checkboxes=document.querySelectorAll(`input[name="${selectorOrGroup}"]:checked,${selectorOrGroup}:checked`);return Array.from(checkboxes).map(cb=>cb.value);}function resetCheckboxes(containerId){const container=document.getElementById(containerId);if(container){container.querySelectorAll('input[type="checkbox"]').forEach(cb=>{cb.checked=false;});}}async function fetchPost(url,data){try{const response=await fetch(url,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)});return await response.json();}catch(error){console.error('fetchPost error:',error);throw error;}}async function fetchGet(url){try{const response=await fetch(url);return await response.json();}catch(error){console.error('fetchGet error:',error);throw error;}}function confirmAction(message,onConfirm,onCancel=null){if(confirm(message)){if(typeof onConfirm==='function'){onConfirm();}}else{if(typeof onCancel==='function'){onCancel();}}}